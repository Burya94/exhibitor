#!/bin/sh
#managed by puppet

NAME=exhibitor
PID_FILE=/var/run/$NAME.pid

EXHIBITOR_OPTS="<%- @defaultfile_opts.sort.each do |k,v|
  if v.length != 0 -%>
 --<%= k %> <%= "\\\"#{v}\\\"" -%>
<%-
  end
end -%>"

function _start(){
    cd /opt/exhibitor/
    /bin/java -jar exhibitor-<%= scope.lookupvar('::exhibitor::version') %>.jar ${EXHIBITOR_OPTS} &
    echo $! > $PID_FILE
    
}

function _stop(){
    kill -INT `cat $PID_FILE`
}



case $1 in
    "start")
        _start()
        echo "Process starting"
        ;;
    "stop")
        _stop()
        echo "Process stopping"
        ;;
