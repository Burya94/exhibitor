#!/bin/sh
#managed by puppet

NAME=exhibitor
PID_FILE=/var/run/$NAME.pid



function _start(){
    cd /opt/exhibitor/
    /bin/java -jar exhibitor-<%= scope.lookupvar('::exhibitor::version') %> -c <%= scope.lookupvar('::exhibitor::configtype')%> --defaultconfig exhibitor.properties --s3credentials <%= scope.lookupvar('::exhibitor::s3credentials')%> --s3region <%= scope.lookupvar('::exhibitor::s3region')%> --s3config <%= scope.lookupvar('::exhibitor::s3config')%> --hostname <%= scope.lookupvar('::exhibitor::hostname ')%>
    echo $! > $PID_FILE

}

function _stop(){
    kill -INT `cat $PID_FILE`
}



case $1 in
    "start")
        _start()
        echo "Process starting"
        ;;
    "stop")
        _stop()
        echo "Process stopping"
        ;;
